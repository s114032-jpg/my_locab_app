<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„é›²ç«¯å–®å­—æœ¬</title>
    <style>
        :root { --primary: #4a90e2; --bg: #f5f7fa; --card-front: #ffffff; --card-back: #eef6ff; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 800px; width: 100%; }
        
        /* è¡¨å–®æ¨£å¼ */
        .input-section { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 30px; }
        input, select, textarea { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; width: 100%; font-size: 16px; transition: 0.3s; }
        button:hover { background: #357abd; }

        /* å–®å­—æœ¬é¡¯ç¤ºæ¨£å¼ */
        .book-section { margin-top: 20px; }
        .unit-title { border-left: 5px solid var(--primary); padding-left: 15px; margin: 30px 0 15px 0; color: #333; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }

        /* å–®å­—å¡ç¿»è½‰æ•ˆæœ */
        .vocab-card { height: 200px; perspective: 1000px; cursor: pointer; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .vocab-card.flipped .card-inner { transform: rotateY(180deg); }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px; padding: 20px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .front { background: var(--card-front); border: 1px solid #eee; }
        .back { background: var(--card-back); transform: rotateY(180deg); color: #2c3e50; }

        .word { font-size: 28px; font-weight: bold; color: var(--primary); }
        .pos { font-style: italic; color: #888; margin-top: 5px; }
        .meaning { font-size: 22px; font-weight: bold; margin-bottom: 10px; }
        .example { font-size: 14px; color: #555; text-align: center; line-height: 1.4; }
        .delete-btn { position: absolute; top: 10px; right: 10px; background: #ff7675; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; z-index: 10; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align: center;">ğŸ“– æˆ‘çš„è‹±æ–‡å–®å­—æœ¬åº«</h1>

    <div class="input-section">
        <h3>â• æ–°å¢å–®å­—å¡</h3>
        <input type="text" id="bookName" placeholder="å–®å­—æœ¬å°é¢ (ä¾‹å¦‚ï¼šå¤šç›Šå–®å­—)">
        <input type="text" id="unitName" placeholder="å–®å…ƒåç¨± (ä¾‹å¦‚ï¼šUnit 1 è·å ´)">
        <input type="text" id="word" placeholder="è‹±æ–‡å–®å­—">
        <input type="text" id="pos" placeholder="è©æ€§ (ä¾‹å¦‚ï¼šn., v., adj.)">
        <input type="text" id="meaning" placeholder="ä¸­æ–‡æ„æ€">
        <textarea id="example" placeholder="ä¾‹å¥" rows="2"></textarea>
        <button onclick="addCard()">åŠ å…¥å–®å­—æœ¬</button>
    </div>

    <div id="displayArea"></div>
</div>

<script>
    let vocabData = JSON.parse(localStorage.getItem('myVocab')) || [];

    function addCard() {
        const card = {
            id: Date.now(),
            book: document.getElementById('bookName').value || "é è¨­æœ¬å­",
            unit: document.getElementById('unitName').value || "ä¸€èˆ¬å–®å…ƒ",
            word: document.getElementById('word').value,
            pos: document.getElementById('pos').value,
            meaning: document.getElementById('meaning').value,
            example: document.getElementById('example').value
        };

        if(!card.word || !card.meaning) return alert("è«‹è‡³å°‘å¡«å¯«å–®å­—èˆ‡æ„æ€ï¼");

        vocabData.push(card);
        saveAndRender();
        // æ¸…ç©ºè¼¸å…¥æ¡†
        document.getElementById('word').value = '';
        document.getElementById('meaning').value = '';
        document.getElementById('example').value = '';
    }

    function deleteCard(id, event) {
        event.stopPropagation(); // é˜²æ­¢è§¸ç™¼ç¿»ç‰Œ
        vocabData = vocabData.filter(c => c.id !== id);
        saveAndRender();
    }

    function saveAndRender() {
        localStorage.setItem('myVocab', JSON.stringify(vocabData));
        render();
    }

    function render() {
        const area = document.getElementById('displayArea');
        area.innerHTML = '';

        // æŒ‰å–®å­—æœ¬èˆ‡å–®å…ƒåˆ†çµ„
        const books = [...new Set(vocabData.map(c => c.book))];

        books.forEach(book => {
            const bookHTML = `<h2>ğŸ“˜ ${book}</h2>`;
            area.innerHTML += bookHTML;

            const units = [...new Set(vocabData.filter(c => c.book === book).map(c => c.unit))];
            units.forEach(unit => {
                let unitHTML = `<div class="unit-section"><h3 class="unit-title">ğŸ“ ${unit}</h3><div class="card-grid">`;
                
                vocabData.filter(c => c.book === book && c.unit === unit).forEach(c => {
                    unitHTML += `
                        <div class="vocab-card" onclick="this.classList.toggle('flipped')">
                            <div class="card-inner">
                                <button class="delete-btn" onclick="deleteCard(${c.id}, event)">Ã—</button>
                                <div class="front">
                                    <div class="word">${c.word}</div>
                                    <div class="pos">${c.pos}</div>
                                </div>
                                <div class="back">
                                    <div class="meaning">${c.meaning}</div>
                                    <div class="example">${c.example}</div>
                                </div>
                            </div>
                        </div>`;
                });
                
                unitHTML += `</div></div>`;
                area.innerHTML += unitHTML;
            });
        });
    }

    // åˆå§‹è¼‰å…¥
    render();
</script>

</body>
</html>
